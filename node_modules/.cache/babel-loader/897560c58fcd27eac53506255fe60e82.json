{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\nimport { ref } from \"vue\";\nimport { useUser } from \"@/composables/useUser\";\nimport useCollection from \"@/composables/useCollection\";\nexport default {\n  setup() {\n    const isMoreDetails = ref(false);\n    const total = ref(0);\n    const category = ref(\"\");\n    const note = ref(\"\");\n    const time = ref(new Date());\n    const {\n      getUser\n    } = useUser();\n    const {\n      error,\n      addRecord\n    } = useCollection('transactions');\n    const file = ref(null);\n    const errorFile = ref(null);\n\n    function onChangeFile(event) {\n      const selected = event.target.files[0];\n      const typesFile = [\"image/png\", \"image/jpg\"];\n\n      if (selected && typesFile.includes(selected.type)) {\n        file.value = selected;\n        console.log(file.value);\n      } else {\n        file.value = null;\n        errorFile.value = \"Please select a file type png or jpg\";\n        console.log(errorFile.value);\n      }\n    }\n\n    async function onSubmit() {\n      const {\n        user\n      } = getUser();\n      const transaction = {\n        total: parseInt(total.value),\n        category: category.value,\n        note: note.value,\n        time: time.value,\n        userId: user.value.uid\n      };\n      await addRecord(transaction);\n      console.log(error);\n      console.log(\"Created\");\n    }\n\n    return {\n      isMoreDetails,\n      total,\n      category,\n      note,\n      time,\n      onSubmit,\n      onChangeFile,\n      errorFile\n    };\n  }\n\n};","map":{"version":3,"mappings":";AAiJA,SAASA,GAAT,QAAoB,KAApB;AACA,SAASC,OAAT,QAAwB,uBAAxB;AACA,OAAQC,aAAR,MAA4B,6BAA5B;AAEA,eAAe;EACbC,KAAK,GAAG;IACN,MAAMC,aAAY,GAAIJ,GAAG,CAAC,KAAD,CAAzB;IACA,MAAMK,KAAI,GAAIL,GAAG,CAAC,CAAD,CAAjB;IACA,MAAMM,QAAO,GAAIN,GAAG,CAAC,EAAD,CAApB;IACA,MAAMO,IAAG,GAAIP,GAAG,CAAC,EAAD,CAAhB;IACA,MAAMQ,IAAG,GAAIR,GAAG,CAAC,IAAIS,IAAJ,EAAD,CAAhB;IACA,MAAM;MAAEC;IAAF,IAAcT,OAAO,EAA3B;IACA,MAAM;MAACU,KAAD;MAAQC;IAAR,IAAqBV,aAAa,CAAC,cAAD,CAAxC;IACA,MAAMW,IAAG,GAAIb,GAAG,CAAC,IAAD,CAAhB;IACA,MAAMc,SAAQ,GAAId,GAAG,CAAC,IAAD,CAArB;;IAEA,SAASe,YAAT,CAAsBC,KAAtB,EAA4B;MAC1B,MAAMC,QAAO,GAAID,KAAK,CAACE,MAAN,CAAaC,KAAb,CAAmB,CAAnB,CAAjB;MACA,MAAMC,SAAQ,GAAI,CAAC,WAAD,EAAc,WAAd,CAAlB;;MAEA,IAAGH,QAAO,IAAKG,SAAS,CAACC,QAAV,CAAmBJ,QAAQ,CAACK,IAA5B,CAAf,EAAiD;QAC/CT,IAAI,CAACU,KAAL,GAAaN,QAAb;QACAO,OAAO,CAACC,GAAR,CAAYZ,IAAI,CAACU,KAAjB;MACD,CAHD,MAGK;QACHV,IAAI,CAACU,KAAL,GAAW,IAAX;QACAT,SAAS,CAACS,KAAV,GAAkB,sCAAlB;QACAC,OAAO,CAACC,GAAR,CAAYX,SAAS,CAACS,KAAtB;MACF;IACF;;IACA,eAAeG,QAAf,GAA0B;MACxB,MAAM;QAACC;MAAD,IAASjB,OAAO,EAAtB;MACA,MAAMkB,WAAU,GAAI;QAClBvB,KAAK,EAAEwB,QAAQ,CAACxB,KAAK,CAACkB,KAAP,CADG;QAElBjB,QAAQ,EAAEA,QAAQ,CAACiB,KAFD;QAGlBhB,IAAI,EAACA,IAAI,CAACgB,KAHQ;QAIlBf,IAAI,EAAEA,IAAI,CAACe,KAJO;QAKlBO,MAAM,EAAEH,IAAI,CAACJ,KAAL,CAAWQ;MALD,CAApB;MAOA,MAAMnB,SAAS,CAACgB,WAAD,CAAf;MACAJ,OAAO,CAACC,GAAR,CAAYd,KAAZ;MACAa,OAAO,CAACC,GAAR,CAAY,SAAZ;IACF;;IACA,OAAO;MACLrB,aADK;MAELC,KAFK;MAGLC,QAHK;MAILC,IAJK;MAKLC,IALK;MAMLkB,QANK;MAOLX,YAPK;MAQLD;IARK,CAAP;EAUF;;AAhDa,CAAf","names":["ref","useUser","useCollection","setup","isMoreDetails","total","category","note","time","Date","getUser","error","addRecord","file","errorFile","onChangeFile","event","selected","target","files","typesFile","includes","type","value","console","log","onSubmit","user","transaction","parseInt","userId","uid"],"sourceRoot":"","sources":["/home/thanhphong/Downloads/VueJS/Project-RHP/i-money/src/views/new-transaction.vue"],"sourcesContent":["<template>\n  <form @submit.prevent=\"onSubmit\">\n\n    <!-- Start main form -->\n    <div class=\"row mt-8\">\n      <div class=\"bg-white rounded-lg py-4\">\n        <div class=\"container mx-auto px-8\">\n          <div class=\"row\">\n            <label for=\"total\" class=\"flex item-end\">\n              <div class=\"w-10 text-right leading-10 mr-4 pb-1\">\n                <span class=\"inline-block px-1 text-dark border border-dark rounded text-sm font-bold\">USD</span>\n              </div>\n              <div class=\"flex flex-col border-b border-gray-100 pb-1\">\n                <span class=\"font-semibold text-xs\">Total</span>\n                <input id=\"total\" class=\"text-4xl text-dark w-full outline-none mt-1\" type=\"text\" placeholder=\"0\"\n                  v-model=\"total\">\n              </div>\n            </label>\n\n          </div>\n          <div class=\"row\">\n            <label for=\"category\" class=\"flex item-center\">\n              <div class=\"flex items-center flex-none w-10 text-right leading-10 mr-4\">\n                <span class=\"inline-block ml-auto w-8 h-8 rounded-full bg-blue-300\"></span>\n              </div>\n              <div class=\"flex-1 border-b border-gray-100 py-3\">\n                <input id=\"category\" class=\"text-xl text-dark w-full outline-none\" type=\"text\"\n                  placeholder=\"Select a category\" v-model=\"category\">\n              </div>\n            </label>\n\n          </div>\n          <div class=\"row\">\n            <label for=\"note\" class=\"flex item-center\">\n              <div class=\"flex items-center flex-none w-10 text-right leading-10 mr-4\">\n                <span class=\"flex-none w-10 mr-4\">\n                  <i class=\"t2ico t2ico-document text-2xl\"></i>\n                </span>\n              </div>\n              <div class=\"flex-1 border-b border-gray-100 py-3\">\n                <input id=\"note\" class=\"text-xl text-dark w-full outline-none\" type=\"text\" placeholder=\"Note\"\n                  v-model=\"note\">\n              </div>\n            </label>\n\n          </div>\n          <div class=\"row\">\n            <label for=\"time\" class=\"flex item-center\">\n              <div class=\"flex-none w-10 mr-4\">\n                <span class=\"flex items-center justify-end text-dark\">\n                  <i class=\"t2ico t2ico-calendar text-2xl\"></i>\n                </span>\n              </div>\n              <div class=\"flex-1 py-2 border-b border-gray-100\">\n                <div class=\"text-dark w-full\">{{ new Date() }}</div>\n              </div>\n            </label>\n\n          </div>\n          <div class=\"row\">\n            <label for=\"wallet\" class=\"flex item-center\">\n              <div class=\"flex-none w-10 mr-4\">\n                <span class=\"flex items-center justify-end text-dark\">\n                  <i class=\"t2ico t2ico-wallet text-2xl\"></i>\n                </span>\n              </div>\n              <div class=\"flex-1 py-2\">\n                <div class=\"text-dark w-full\">My Wallet</div>\n              </div>\n            </label>\n\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"row mt-8\" v-if=\"!isMoreDetails\">\n      <button @click=\"isMoreDetails = true\" class=\"bg-white rounded-lg py-3 w-full text-primary font-semibold\">More\n        Details</button>\n    </div>\n\n    <!-- Start Advanced form -->\n    <template v-if=\"isMoreDetails\">\n      <div class=\"row mt-8\">\n        <div class=\"bg-white rounded-lg py-4\">\n          <div class=\"container mx-auto px-8\">\n            <div class=\"row\">\n              <label for=\"location\" class=\"flex item-center\">\n                <div class=\"flex-none w-10 mr-4\">\n                  <span class=\"flex items-center justify-end text-dark\">\n                    <i class=\"t2ico t2ico-location text-2xl\"></i>\n                  </span>\n                </div>\n                <div class=\"flex-1 py-2 border-b border-gray-100\">\n                  <input type=\"text\" class=\"text-dark w-full outline-none\" placeholder=\"Select a location\">\n                </div>\n              </label>\n\n            </div>\n            <div class=\"row\">\n              <label for=\"withPerson\" class=\"flex item-center\">\n                <div class=\"flex-none w-10 mr-4\">\n                  <span class=\"flex items-center justify-end text-dark\">\n                    <i class=\"t2ico t2ico-users text-2xl\"></i>\n                  </span>\n                </div>\n                <div class=\"flex-1 py-2\">\n                  <input type=\"text\" class=\"text-dark w-full outline-none\" placeholder=\"With person\">\n                </div>\n              </label>\n\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- Start Upload photos -->\n      <div class=\"row mt-8\">\n        <div class=\"bg-white rounded-lg py-4\">\n          <div class=\"container mx-auto px-8\">\n            <div class=\"row\">\n              <label for=\"file\" class=\"flex item-center text-primary\">\n                <div class=\"flex-none w-10 mr-4\">\n                  <span class=\"flex items-center justify-end\">\n                    <i class=\"t2ico t2ico-camera text-2xl\"></i>\n                  </span>\n                </div>\n                <div class=\"flex-1 py-2\">\n                  <div class=\"w-full font-semibold\">Upload Photo</div>\n                  <input id=\"file\" type=\"file\" class=\"w-0 h-0 overflow-hidden absolute\" @change=\"onChangeFile\">\n                </div>\n              </label>\n\n            </div>\n          </div>\n        </div>\n        <div class=\"text-danger\">{{errorFile}}</div>\n      </div>\n    </template>\n\n    <button class=\"bg-primary text-white\">testing</button>\n  </form>\n</template>\n\n<script>\nimport { ref } from \"vue\"\nimport { useUser } from \"@/composables/useUser\"\nimport  useCollection  from \"@/composables/useCollection\"\n\nexport default {\n  setup() {\n    const isMoreDetails = ref(false)\n    const total = ref(0)\n    const category = ref(\"\")\n    const note = ref(\"\")\n    const time = ref(new Date())\n    const { getUser } = useUser()\n    const {error, addRecord} = useCollection('transactions')\n    const file = ref(null)\n    const errorFile = ref(null)\n\n    function onChangeFile(event){\n      const selected = event.target.files[0]\n      const typesFile = [\"image/png\", \"image/jpg\"]\n\n      if(selected && typesFile.includes(selected.type)){\n        file.value = selected\n        console.log(file.value)\n      }else{\n        file.value=null\n        errorFile.value = \"Please select a file type png or jpg\"\n        console.log(errorFile.value);\n      }\n    }\n    async function onSubmit() {\n      const {user} = getUser();\n      const transaction = {\n        total: parseInt(total.value),\n        category: category.value,\n        note:note.value,\n        time: time.value,\n        userId: user.value.uid,\n      }\n      await addRecord(transaction)\n      console.log(error);\n      console.log(\"Created\");\n    }\n    return {\n      isMoreDetails,\n      total,\n      category,\n      note,\n      time,\n      onSubmit,\n      onChangeFile,\n      errorFile\n    }\n  }\n}\n</script>"]},"metadata":{},"sourceType":"module"}