{"ast":null,"code":"import _regeneratorRuntime from \"/home/thanhphong/Downloads/VueJS/MoneyManager/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/home/thanhphong/Downloads/VueJS/MoneyManager/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.date.to-string.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.parse-int.js\";\nimport { ref } from \"vue\";\nimport { useUser } from \"@/composables/useUser\";\nimport useCollection from \"@/composables/useCollection\";\nimport useStorage from \"@/composables/useStorage\";\nexport default {\n  setup: function setup() {\n    var isMoreDetails = ref(false);\n\n    var _useUser = useUser(),\n        getUser = _useUser.getUser;\n\n    var _useCollection = useCollection('transactions'),\n        error = _useCollection.error,\n        addRecord = _useCollection.addRecord;\n\n    var _useStorage = useStorage('transactions'),\n        url = _useStorage.url,\n        uploadFile = _useStorage.uploadFile;\n\n    var total = ref(0);\n    var category = ref(\"\");\n    var note = ref(\"\");\n    var time = ref(new Date());\n    var location = ref(\"\");\n    var person = ref(\"\");\n    var file = ref(null);\n    var errorFile = ref(null);\n\n    function onChangeFile(event) {\n      var selected = event.target.files[0];\n      var typesFile = [\"image/png\", \"image/jpg\"];\n\n      if (selected && typesFile.includes(selected.type)) {\n        file.value = selected;\n      } else {\n        file.value = null;\n        errorFile.value = \"Please select a file type png or jpg\";\n      }\n    }\n\n    function onSubmit() {\n      return _onSubmit.apply(this, arguments);\n    }\n\n    function _onSubmit() {\n      _onSubmit = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var _getUser, user, transaction;\n\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!file.value) {\n                  _context.next = 3;\n                  break;\n                }\n\n                _context.next = 3;\n                return uploadFile(file.value);\n\n              case 3:\n                _getUser = getUser(), user = _getUser.user;\n                transaction = {\n                  total: parseInt(total.value),\n                  category: category.value,\n                  note: note.value,\n                  time: time.value,\n                  location: location.value,\n                  person: person.value,\n                  userId: user.value.uid,\n                  thumbnail: url.value\n                };\n                _context.next = 7;\n                return addRecord(transaction);\n\n              case 7:\n                console.log(error);\n                console.log(\"Created\");\n\n              case 9:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n      return _onSubmit.apply(this, arguments);\n    }\n\n    return {\n      isMoreDetails: isMoreDetails,\n      total: total,\n      category: category,\n      note: note,\n      time: time,\n      location: location,\n      person: person,\n      errorFile: errorFile,\n      onChangeFile: onChangeFile,\n      onSubmit: onSubmit\n    };\n  }\n};","map":{"version":3,"mappings":"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","names":["ref","useUser","useCollection","useStorage","setup","isMoreDetails","getUser","error","addRecord","url","uploadFile","total","category","note","time","Date","location","person","file","errorFile","onChangeFile","event","selected","target","files","typesFile","includes","type","value","onSubmit","user","transaction","parseInt","userId","uid","thumbnail","console","log"],"sourceRoot":"","sources":["/home/thanhphong/Downloads/VueJS/MoneyManager/src/views/new-transaction.vue"],"sourcesContent":["<template>\n  <form @submit.prevent=\"onSubmit\">\n\n    <!-- Start main form -->\n    <div class=\"row mt-8\">\n      <div class=\"bg-white rounded-lg py-4\">\n        <div class=\"container mx-auto px-8\">\n          <div class=\"row\">\n            <label for=\"total\" class=\"flex item-end\">\n              <div class=\"w-10 text-right leading-10 mr-4 pb-1\">\n                <span class=\"inline-block px-1 text-dark border border-dark rounded text-sm font-bold\">USD</span>\n              </div>\n              <div class=\"flex flex-col border-b border-gray-100 pb-1\">\n                <span class=\"font-semibold text-xs\">Total</span>\n                <input id=\"total\" class=\"text-4xl text-dark w-full outline-none mt-1\" type=\"text\" placeholder=\"0\"\n                  v-model=\"total\">\n              </div>\n            </label>\n\n          </div>\n          <div class=\"row\">\n            <label for=\"category\" class=\"flex item-center\">\n              <div class=\"flex items-center flex-none w-10 text-right leading-10 mr-4\">\n                <span class=\"inline-block ml-auto w-8 h-8 rounded-full bg-blue-300\"></span>\n              </div>\n              <div class=\"flex-1 border-b border-gray-100 py-3\">\n                <input id=\"category\" class=\"text-xl text-dark w-full outline-none\" type=\"text\"\n                  placeholder=\"Select a category\" v-model=\"category\">\n              </div>\n            </label>\n\n          </div>\n          <div class=\"row\">\n            <label for=\"note\" class=\"flex item-center\">\n              <div class=\"flex items-center flex-none w-10 text-right leading-10 mr-4\">\n                <span class=\"flex-none w-10 mr-4\">\n                  <i class=\"t2ico t2ico-document text-2xl\"></i>\n                </span>\n              </div>\n              <div class=\"flex-1 border-b border-gray-100 py-3\">\n                <input id=\"note\" class=\"text-xl text-dark w-full outline-none\" type=\"text\" placeholder=\"Note\"\n                  v-model=\"note\">\n              </div>\n            </label>\n\n          </div>\n          <div class=\"row\">\n            <label for=\"time\" class=\"flex item-center\">\n              <div class=\"flex-none w-10 mr-4\">\n                <span class=\"flex items-center justify-end text-dark\">\n                  <i class=\"t2ico t2ico-calendar text-2xl\"></i>\n                </span>\n              </div>\n              <div class=\"flex-1 py-2 border-b border-gray-100\">\n                <div class=\"text-dark w-full\">{{ new Date() }}</div>\n              </div>\n            </label>\n\n          </div>\n          <div class=\"row\">\n            <label for=\"wallet\" class=\"flex item-center\">\n              <div class=\"flex-none w-10 mr-4\">\n                <span class=\"flex items-center justify-end text-dark\">\n                  <i class=\"t2ico t2ico-wallet text-2xl\"></i>\n                </span>\n              </div>\n              <div class=\"flex-1 py-2\">\n                <div class=\"text-dark w-full\">My Wallet</div>\n              </div>\n            </label>\n\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"row mt-8\" v-if=\"!isMoreDetails\">\n      <button @click=\"isMoreDetails = true\" class=\"bg-white rounded-lg py-3 w-full text-primary font-semibold\">More\n        Details</button>\n    </div>\n\n    <!-- Start Advanced form -->\n    <template v-if=\"isMoreDetails\">\n      <div class=\"row mt-8\">\n        <div class=\"bg-white rounded-lg py-4\">\n          <div class=\"container mx-auto px-8\">\n            <div class=\"row\">\n              <label for=\"location\" class=\"flex item-center\">\n                <div class=\"flex-none w-10 mr-4\">\n                  <span class=\"flex items-center justify-end text-dark\">\n                    <i class=\"t2ico t2ico-location text-2xl\"></i>\n                  </span>\n                </div>\n                <div class=\"flex-1 py-2 border-b border-gray-100\">\n                  <input type=\"text\" class=\"text-dark w-full outline-none\" placeholder=\"Select a location\"\n                    v-model=\"location\">\n                </div>\n              </label>\n\n            </div>\n            <div class=\"row\">\n              <label for=\"withPerson\" class=\"flex item-center\">\n                <div class=\"flex-none w-10 mr-4\">\n                  <span class=\"flex items-center justify-end text-dark\">\n                    <i class=\"t2ico t2ico-users text-2xl\"></i>\n                  </span>\n                </div>\n                <div class=\"flex-1 py-2\">\n                  <input type=\"text\" class=\"text-dark w-full outline-none\" placeholder=\"With person\" v-model=\"person\">\n                </div>\n              </label>\n\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- Start Upload photos -->\n      <div class=\"row mt-8\">\n        <div class=\"bg-white rounded-lg py-4\">\n          <div class=\"container mx-auto px-8\">\n            <div class=\"row\">\n              <label for=\"file\" class=\"flex item-center text-primary\">\n                <div class=\"flex-none w-10 mr-4\">\n                  <span class=\"flex items-center justify-end\">\n                    <i class=\"t2ico t2ico-camera text-2xl\"></i>\n                  </span>\n                </div>\n                <div class=\"flex-1 py-2\">\n                  <div class=\"w-full font-semibold\">Upload Photo</div>\n                  <input id=\"file\" type=\"file\" class=\"w-0 h-0 overflow-hidden absolute\" @change=\"onChangeFile\">\n                </div>\n              </label>\n\n            </div>\n          </div>\n        </div>\n        <div class=\"text-rose-600\">{{ errorFile }}</div>\n      </div>\n    </template>\n\n    <button class=\"bg-primary text-white\">testing</button>\n  </form>\n</template>\n\n<script>\nimport { ref } from \"vue\"\nimport { useUser } from \"@/composables/useUser\"\nimport useCollection from \"@/composables/useCollection\"\nimport useStorage from \"@/composables/useStorage\"\nexport default {\n  setup() {\n    const isMoreDetails = ref(false)\n    const { getUser } = useUser()\n    const { error, addRecord } = useCollection('transactions')\n    const { url, uploadFile } = useStorage('transactions')\n    const total = ref(0)\n    const category = ref(\"\")\n    const note = ref(\"\")\n    const time = ref(new Date())\n    const location = ref(\"\")\n    const person = ref(\"\")\n\n    const file = ref(null)\n    const errorFile = ref(null)\n\n    function onChangeFile(event) {\n      const selected = event.target.files[0]\n      const typesFile = [\"image/png\", \"image/jpg\"]\n\n      if (selected && typesFile.includes(selected.type)) {\n        file.value = selected\n      } else {\n        file.value = null\n        errorFile.value = \"Please select a file type png or jpg\"\n      }\n    }\n    async function onSubmit() {\n      if (file.value) await uploadFile(file.value)\n\n      const { user } = getUser();\n      const transaction = {\n        total: parseInt(total.value),\n        category: category.value,\n        note: note.value,\n        time: time.value,\n        location: location.value,\n        person: person.value,\n        userId: user.value.uid,\n        thumbnail: url.value\n      }\n      await addRecord(transaction);\n\n      console.log(error);\n      console.log(\"Created\");\n    }\n    return {\n      isMoreDetails,\n      total,\n      category,\n      note,\n      time,\n      location,\n      person,\n      errorFile,\n      onChangeFile,\n      onSubmit,\n    }\n  }\n}\n</script>"]},"metadata":{},"sourceType":"module"}