{"ast":null,"code":"import { ref } from \"vue\";\nimport { projectStorage } from \"@/configs/firebase\";\nimport { useUser } from \"./useUser\";\nconst {\n  getUser\n} = useUser();\nconst {\n  user\n} = getUser();\n\nconst useStorage = name => {\n  const error = ref(null);\n  const filePath = ref(null);\n  const url = ref(null);\n\n  async function uploadFile(file) {\n    filePath.value = `${name}/${user.value.uid}/${file.name}`;\n    console.log(filePath);\n    const fileRef = projectStorage.ref(filePath.value);\n    console.log(fileRef);\n\n    try {\n      const response = await fileRef.put(file);\n      url.value = await response.ref.getDownloadURL();\n      return url.value;\n    } catch (err) {\n      console.log(err);\n      error.value = err.message;\n    }\n  }\n\n  return {\n    error,\n    filePath,\n    url,\n    uploadFile\n  };\n};\n\nexport default useStorage;","map":{"version":3,"names":["ref","projectStorage","useUser","getUser","user","useStorage","name","error","filePath","url","uploadFile","file","value","uid","console","log","fileRef","response","put","getDownloadURL","err","message"],"sources":["/home/thanhphong/Downloads/VueJS/Project-RHP/i-money/src/composables/useStorage.js"],"sourcesContent":["import { ref } from \"vue\";\nimport { projectStorage } from \"@/configs/firebase\";\nimport { useUser } from \"./useUser\";\n\nconst { getUser } = useUser();\nconst { user } = getUser();\nconst useStorage = (name) => {\n    const error = ref(null);\n    const filePath = ref(null);\n    const url = ref(null);\n\n    async function uploadFile(file) {\n        filePath.value = `${name}/${user.value.uid}/${file.name}`;\n        console.log(filePath);\n        const fileRef = projectStorage.ref(filePath.value);\n        console.log(fileRef);\n        try {\n            const response = await fileRef.put(file);\n\n            url.value = await response.ref.getDownloadURL()\n\n            return url.value;\n        } catch (err) {\n            console.log(err);\n            error.value = err.message;\n        }\n    }\n\n    return { error, filePath, url, uploadFile };\n};\n\nexport default useStorage;"],"mappings":"AAAA,SAASA,GAAT,QAAoB,KAApB;AACA,SAASC,cAAT,QAA+B,oBAA/B;AACA,SAASC,OAAT,QAAwB,WAAxB;AAEA,MAAM;EAAEC;AAAF,IAAcD,OAAO,EAA3B;AACA,MAAM;EAAEE;AAAF,IAAWD,OAAO,EAAxB;;AACA,MAAME,UAAU,GAAIC,IAAD,IAAU;EACzB,MAAMC,KAAK,GAAGP,GAAG,CAAC,IAAD,CAAjB;EACA,MAAMQ,QAAQ,GAAGR,GAAG,CAAC,IAAD,CAApB;EACA,MAAMS,GAAG,GAAGT,GAAG,CAAC,IAAD,CAAf;;EAEA,eAAeU,UAAf,CAA0BC,IAA1B,EAAgC;IAC5BH,QAAQ,CAACI,KAAT,GAAkB,GAAEN,IAAK,IAAGF,IAAI,CAACQ,KAAL,CAAWC,GAAI,IAAGF,IAAI,CAACL,IAAK,EAAxD;IACAQ,OAAO,CAACC,GAAR,CAAYP,QAAZ;IACA,MAAMQ,OAAO,GAAGf,cAAc,CAACD,GAAf,CAAmBQ,QAAQ,CAACI,KAA5B,CAAhB;IACAE,OAAO,CAACC,GAAR,CAAYC,OAAZ;;IACA,IAAI;MACA,MAAMC,QAAQ,GAAG,MAAMD,OAAO,CAACE,GAAR,CAAYP,IAAZ,CAAvB;MAEAF,GAAG,CAACG,KAAJ,GAAY,MAAMK,QAAQ,CAACjB,GAAT,CAAamB,cAAb,EAAlB;MAEA,OAAOV,GAAG,CAACG,KAAX;IACH,CAND,CAME,OAAOQ,GAAP,EAAY;MACVN,OAAO,CAACC,GAAR,CAAYK,GAAZ;MACAb,KAAK,CAACK,KAAN,GAAcQ,GAAG,CAACC,OAAlB;IACH;EACJ;;EAED,OAAO;IAAEd,KAAF;IAASC,QAAT;IAAmBC,GAAnB;IAAwBC;EAAxB,CAAP;AACH,CAvBD;;AAyBA,eAAeL,UAAf"},"metadata":{},"sourceType":"module"}